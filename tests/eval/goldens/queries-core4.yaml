schemaVersion: "1.0.0"
datasetVersion: "v2025-11-docs-plain"
description: "Core low-score queries subset"
defaultParams:
  k: 10
  tool: "context_bundle"
  boostProfile: "default"
  timeoutMs: 30000

defaultRepo: "vscode"
repos:
  vscode:
    repoPath: "external/vscode"
    dbPath: "external/vscode/.kiri/index.duckdb"
  assay-kit:
    repoPath: "external/assay-kit"
    dbPath: "external/assay-kit/.kiri/index.duckdb"

queries:
  - id: vscode-microtask-debug
    query: "microtaskQueue tracer schedule vs/base"
    tool: "context_bundle"
    intent: "Locate microtask queue tracer scheduling logic"
    category: "debug"
    repo: "vscode"
    params:
      boostProfile: "vscode"
    expected:
      paths:
        - "src/vs/platform/telemetry/common/telemetryUtils.ts"
    hints:
      - "telemetryUtils.ts"
      - "microtask"
      - "tracer"

  - id: vscode-task-terminal
    query: "TaskTerminalShellIntegration registerRunProfiles"
    tool: "context_bundle"
    intent: "Find where task terminal shell integration registers run profiles"
    category: "feature"
    repo: "vscode"
    params:
      boostProfile: "vscode"
    expected:
      paths:
        - "src/vs/workbench/contrib/tasks/browser/terminalTaskSystem.ts"
    hints:
      - "terminalTaskSystem.ts"
      - "registerRunProfiles"

  - id: vscode-tree-data-provider
    query: "TreeDataProvider registerTreeDataProvider"
    tool: "context_bundle"
    intent: "Locate TreeDataProvider API implementation"
    category: "api"
    repo: "vscode"
    params:
      boostProfile: "vscode"
    expected:
      paths:
        - "src/vs/workbench/api/common/extHostTreeViews.ts"
    hints:
      - "extHostTreeViews.ts"
      - "registerTreeDataProvider"

  - id: assay-dataset-loader
    query: "loadDatasetFromYAML schema validation error"
    tool: "context_bundle"
    intent: "Find dataset loader and schema definitions"
    category: "assay"
    repo: "assay-kit"
    params:
      boostProfile: "default"
    expected:
      paths:
        - "packages/assay-kit/src/dataset/loader.ts"
        - "packages/assay-kit/src/dataset/schemas/dataset.schema.ts"
        - "packages/assay-kit/src/dataset/schemas/query.schema.ts"
    hints:
      - "packages/assay-kit/src/dataset/loader.ts"
      - "packages/assay-kit/src/dataset/schemas/dataset.schema.ts"
      - "packages/assay-kit/src/dataset/schemas/query.schema.ts"
      - "loadDatasetFromYAML"
      - "schema"
      - "validation"
      - "dataset"
      - "loader"
